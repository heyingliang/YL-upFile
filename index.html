<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>文件上传功能实现</title>
	<meta name="viewport" content="initial-scale=1" >
	<link rel="stylesheet" type="text/css" href="style/index.css">
	<script type="text/javascript" src="js/YLupload.js"></script>
</head>
<body>
<section class="upload">
	<h1>YLupload的Demo</h1>
	<div class="box">
		<input type="file" multiple="multiple">
		<figure class="icon"></figure>
		<p>Drop your files here!</p>
	</div>
	<div id="files">
	</div>
	<script type="text/javascript">
		var box = document.querySelector(".box"),
			file = document.getElementById('files');
			// 参数
		var params = {
			inputFile: document.querySelector(".box input"),
			dropCell: box,
			dragenter: function(){
				this.dropCell.style.borderColor = "#ff0000";
			},
			dragleave: function(){
				this.dropCell.style.borderColor = "";
			},
			autoUp: true,
			url: "php/file.php",
			readyUp: function(files){
				var ul = document.createElement("ul"),
					li;
				for (var i = 0; i < files.length; i++) {
					li = document.createElement("li");
					li.className = "progress";
					li.innerHTML = "<span>" + files[i].name + "</span><div><div class='bar'></div></div>";
					ul.appendChild(li);
				}
				file.innerHTML = ''; // 清空原有的
				file.appendChild(ul);
			},
			upProcess: function(file,loaded,total){
				document.querySelectorAll(".progress")[file.index].classList.add("pending");
				document.querySelectorAll(".bar")[file.index].style.width = (loaded / total * 100).toFixed(2) + "%";
			},
			success: function(file,response){
				document.querySelectorAll(".progress")[file.index].className = "progress success";
			}
		};
		var test1 = YLupload(params).run();

		box.onclick = function(){
			params.inputFile.click();
		}
	</script>
</section>
</body>
</html>
